{"ast":null,"code":"import _slicedToArray from\"D:/vs_code/React_applications_learning/i-notes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios,{HttpStatusCode}from'axios';import React,{useState,useContext}from'react';import Swal from'sweetalert2';import EditDetails from'./EditDetails';import Loader from'../Loader';import{useNavigate}from'react-router-dom';import userContext from'../../contexts/UserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Settings=function Settings(){var _useState=useState({name:\"---------\",username:\"---------\",password:\"---------\",registeredDate:\"---------\"}),_useState2=_slicedToArray(_useState,2),details=_useState2[0],setDetails=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var GetUserDetails=function GetUserDetails(){setIsLoading(function(prevState){return!prevState;});var config={headers:{'Authorization':localStorage.getItem('tokenForValidation')}};axios.get('https://inotes-application.onrender.com/user/get',config).then(function(response){var obj={name:response.data.name,username:response.data.username,password:response.data.password,registeredDate:response.data.registrationDate};setDetails(obj);}).catch(function(err){if(err.response){Swal.fire({icon:\"error\",title:\"Error!\",text:\"\".concat(err.response.data,\" !!! \")});}}).finally(function(){setIsLoading(false);});};var userObj=useContext(userContext);var navigate=useNavigate();var deleteAccount=function deleteAccount(){Swal.fire({title:\"Are you sure?\",text:\"You won't be able to revert this!\",icon:'warning',showCancelButton:true,confirmButtonColor:'#d33',cancelButtonColor:'#3085d6',confirmButtonText:'Yes, Delete!'}).then(function(result){if(result.isConfirmed){setIsLoading(function(prevState){return!prevState;});var url='https://inotes-application.onrender.com/user/deleteUser';var config={headers:{'Authorization':localStorage.getItem('tokenForValidation')}};axios.delete(url,config).then(function(response){if(response.status===HttpStatusCode.Ok){localStorage.removeItem('tokenForValidation');localStorage.removeItem('user');userObj.setLoggedUser('');Swal.fire(\"Deleted Successfully\",\"Your Account has been deleted successfully!!\",\"success\").then(function(){navigate('/');});}}).catch(function(error){if(error.response){Swal.fire(\"Failed\",\"\".concat(error.response.data),\"error\");}}).finally(function(){setIsLoading(false);});}});};return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[\" \",/*#__PURE__*/_jsx(Loader,{})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:deleteAccount,className:\"btn btn-danger btn-md mt-3\",children:\"Delete Account\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/image/settings.png\",style:{padding:'10px',height:'9em',filter:'drop-shadow(1px 2px 3px)'},alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col\",style:{fontFamily:\"poppins\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row p-2 mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",style:{fontSize:'1.5em'},children:\"Your Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 fs-4\",children:\":\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col mt-1\",style:{fontSize:'1.3em'},children:details.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row p-2 mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",style:{fontSize:'1.5em'},children:\"Username\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 fs-4\",children:\":\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col mt-1\",style:{fontSize:'1.3em'},children:details.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row p-2 mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",style:{fontSize:'1.5em'},children:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 fs-4\",children:\":\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col mt-1\",style:{fontSize:'1.3em'},children:details.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row p-2 mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",style:{fontSize:'1.5em'},children:\"Registered Date\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 fs-4\",children:\":\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col mt-1\",style:{fontSize:'1.3em'},children:details.registeredDate})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row text-center mt-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-md\",onClick:GetUserDetails,children:\"Get Details\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(EditDetails,{})})]})]})});};export default Settings;","map":{"version":3,"names":["axios","HttpStatusCode","React","useState","useContext","Swal","EditDetails","Loader","useNavigate","userContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Settings","_useState","name","username","password","registeredDate","_useState2","_slicedToArray","details","setDetails","_useState3","_useState4","isLoading","setIsLoading","GetUserDetails","prevState","config","headers","localStorage","getItem","get","then","response","obj","data","registrationDate","catch","err","fire","icon","title","text","concat","finally","userObj","navigate","deleteAccount","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","isConfirmed","url","delete","status","Ok","removeItem","setLoggedUser","error","children","className","onClick","src","style","padding","height","filter","alt","fontFamily","fontSize"],"sources":["D:/vs_code/React_applications_learning/i-notes/src/components/user/Settings.js"],"sourcesContent":["import axios, { HttpStatusCode } from 'axios'\r\nimport React, { useState,useContext } from 'react'\r\nimport Swal from 'sweetalert2'\r\nimport EditDetails from './EditDetails'\r\nimport Loader from '../Loader'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport userContext from '../../contexts/UserContext'\r\nconst Settings = () => {\r\n\r\n  const [details, setDetails] = useState({\r\n    name: \"---------\",\r\n    username: \"---------\",\r\n    password: \"---------\",\r\n    registeredDate: \"---------\"\r\n  })\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const GetUserDetails = () => {\r\n    setIsLoading((prevState) => !prevState)\r\n    const config = {\r\n      headers: {\r\n        'Authorization': localStorage.getItem('tokenForValidation')\r\n      }\r\n    };\r\n    axios.get('https://inotes-application.onrender.com/user/get', config).then((response) => {\r\n      let obj = {\r\n        name: response.data.name, username: response.data.username, password: response.data.password, registeredDate: response.data.registrationDate\r\n      }\r\n      setDetails(obj)\r\n    }).catch(err => {\r\n      if (err.response) {\r\n        Swal.fire({ icon: \"error\", title: \"Error!\", text: `${err.response.data} !!! ` })\r\n      }\r\n    }).finally(() => { setIsLoading(false) })\r\n  }\r\n  const userObj = useContext(userContext);\r\n  const navigate=useNavigate()\r\n  const deleteAccount = () => {\r\n    Swal.fire({\r\n      title: \"Are you sure?\",\r\n      text: `You won't be able to revert this!`,\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#d33',\r\n      cancelButtonColor: '#3085d6',\r\n      confirmButtonText: 'Yes, Delete!'\r\n    }).then(result => {\r\n      if (result.isConfirmed) {\r\n        setIsLoading((prevState) => !prevState)\r\n        let url = 'https://inotes-application.onrender.com/user/deleteUser'\r\n        const config = {\r\n          headers: {\r\n            'Authorization': localStorage.getItem('tokenForValidation')\r\n          }\r\n        };\r\n        axios.delete(url, config).then(response => {\r\n          if (response.status === HttpStatusCode.Ok) {\r\n            localStorage.removeItem('tokenForValidation')\r\n            localStorage.removeItem('user')\r\n            userObj.setLoggedUser('')\r\n            Swal.fire(\"Deleted Successfully\", \"Your Account has been deleted successfully!!\", \"success\").then(()=>{\r\n              navigate('/')\r\n            })\r\n          }\r\n        }).catch(error => {\r\n          if (error.response) {\r\n            Swal.fire(`Failed`, `${error.response.data}`, `error`)\r\n          }\r\n        }).finally(() => { setIsLoading(false) })\r\n      }\r\n    })\r\n  }\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <div className=\"mt-5\"> <Loader /></div>\r\n      ) : (\r\n        <div className=\"container\">\r\n          <button onClick={deleteAccount} className='btn btn-danger btn-md mt-3'>Delete Account</button>\r\n          <div className='text-center'>\r\n            <img src=\"/image/settings.png\" style={{ padding: '10px', height: '9em', filter: 'drop-shadow(1px 2px 3px)' }} alt=\"\" />\r\n          </div>\r\n          <div className=\"row mt-4\">\r\n            <div className=\"col\" style={{ fontFamily: \"poppins\" }}>\r\n              <div className=\"row p-2 mt-2\">\r\n                <div className=\"col\" style={{ fontSize: '1.5em' }}>Your Name</div>\r\n                <div className=\"col-1 fs-4\">:</div>\r\n                <div className=\"col mt-1\" style={{ fontSize: '1.3em' }}>{details.name}</div>\r\n              </div>\r\n              <div className=\"row p-2 mt-1\">\r\n                <div className=\"col\" style={{ fontSize: '1.5em' }}>Username</div>\r\n                <div className=\"col-1 fs-4\">:</div>\r\n                <div className=\"col mt-1\" style={{ fontSize: '1.3em' }}>{details.username}</div>\r\n              </div>\r\n              <div className=\"row p-2 mt-1\">\r\n                <div className=\"col\" style={{ fontSize: '1.5em' }}>Password</div>\r\n                <div className=\"col-1 fs-4\">:</div>\r\n                <div className=\"col mt-1\" style={{ fontSize: '1.3em' }}>{details.password}</div>\r\n              </div>\r\n              <div className=\"row p-2 mt-1\">\r\n                <div className=\"col\" style={{ fontSize: '1.5em' }}>Registered Date</div>\r\n                <div className=\"col-1 fs-4\">:</div>\r\n                <div className=\"col mt-1\" style={{ fontSize: '1.3em' }}>{details.registeredDate}</div>\r\n              </div>\r\n              <div className=\"row text-center mt-3\"><div className=\"col\"><button className='btn btn-primary btn-md' onClick={GetUserDetails}>Get Details</button></div></div>\r\n            </div>\r\n            <div className=\"col\">\r\n              <EditDetails />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Settings\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}