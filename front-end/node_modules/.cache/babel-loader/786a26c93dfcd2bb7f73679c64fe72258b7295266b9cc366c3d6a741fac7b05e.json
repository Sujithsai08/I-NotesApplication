{"ast":null,"code":"import _slicedToArray from\"D:/vs_code/React_applications_learning/i-notes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import todoContext from'./TodoContext';import axios,{HttpStatusCode}from'axios';import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";var TodoState=function TodoState(props){var initialTodos=[];var _useState=useState(initialTodos),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];var getTodos=function getTodos(){var config={headers:{'Authorization':localStorage.getItem('tokenForValidation')}};var url='https://inotes-application.onrender.com/user/getTodos';axios.get(url,config).then(function(response){if(response.status===HttpStatusCode.Ok){setTodos(response.data);}}).catch(function(error){if(error.response){Swal.fire({title:\"Error !\",icon:'error',text:\"\".concat(error.response.data)});}else{Swal.fire(\"Something went wrong\",\"Please try again later\",'error');}});};var updateTodo=function updateTodo(id){Swal.fire({title:'Enter TODO to update',input:'text',inputAttributes:{autocapitalize:'off'},showCancelButton:true,confirmButtonText:'Update',showLoaderOnConfirm:true,preConfirm:function preConfirm(description){var config={headers:{'Authorization':localStorage.getItem('tokenForValidation')}};var url=\"https://inotes-application.onrender.com/user/updateTodoDescription\";var data={'description':description,'id':id};return axios.put(url,data,config).then(function(res){if(res.status===HttpStatusCode.Ok){Swal.fire({title:\"Success!\",text:\"TODO changed with \".concat(description),icon:'success'});var newTodos=todos.map(function(todo){if(todo.id===id){todo.description=description;}return todo;});setTodos(newTodos);}}).catch(function(err){if(err.response){Swal.showValidationMessage(\"Failed : \".concat(err.response.data));}else{Swal.showValidationMessage(\"Something went wrong!\");}});},allowOutsideClick:function allowOutsideClick(){return!Swal.isLoading();}});};var deleteTodo=function deleteTodo(id,setIsLoading){var config={headers:{'Authorization':localStorage.getItem('tokenForValidation')}};var url=\"https://inotes-application.onrender.com/user/deleteTodo?id=\".concat(id);axios.delete(url,config).then(function(res){if(res.status===HttpStatusCode.Ok){Swal.fire({title:\"Success!\",text:\"TODO deleted\",icon:'success'});var newTodo=todos.filter(function(item){return item.id!==id;});setTodos(newTodo);}}).catch(function(err){if(err.response){Swal.fire(\"Failed\",\"\".concat(err.response.data),\"error\");}else{Swal.fire({title:\"Error occured Try again!!!\",icon:'error'});}}).finally(function(){setIsLoading(function(){return false;});});};var todoCompleted=function todoCompleted(id,setIsLoading){var config={headers:{'Authorization':localStorage.getItem('tokenForValidation')}};var url=\"https://inotes-application.onrender.com/user/updateTodoCompletion\";var data={'isCompleted':\"true\",'id':id};return axios.put(url,data,config).then(function(res){if(res.status===HttpStatusCode.Ok){Swal.fire({title:\"Success!\",text:\"TODO completed .\",icon:'success'});var newTodos=todos.map(function(todo){if(todo.id===id){todo.isCompleted=\"true\";}return todo;});setTodos(newTodos);}}).catch(function(err){if(err.response){Swal.fire(\"Failed\",\"\".concat(err.response.data),\"error\");}else{Swal.fire({title:\"Error occured Try again!!!\",icon:'error'});}}).finally(function(){setIsLoading(function(){return false;});});};return/*#__PURE__*/_jsx(todoContext.Provider,{value:{todos:todos,setTodos:setTodos,getTodos:getTodos,updateTodo:updateTodo,deleteTodo:deleteTodo,todoCompleted:todoCompleted},children:props.children});};export default TodoState;","map":{"version":3,"names":["React","useState","todoContext","axios","HttpStatusCode","Swal","jsx","_jsx","TodoState","props","initialTodos","_useState","_useState2","_slicedToArray","todos","setTodos","getTodos","config","headers","localStorage","getItem","url","get","then","response","status","Ok","data","catch","error","fire","title","icon","text","concat","updateTodo","id","input","inputAttributes","autocapitalize","showCancelButton","confirmButtonText","showLoaderOnConfirm","preConfirm","description","put","res","newTodos","map","todo","err","showValidationMessage","allowOutsideClick","isLoading","deleteTodo","setIsLoading","delete","newTodo","filter","item","finally","todoCompleted","isCompleted","Provider","value","children"],"sources":["D:/vs_code/React_applications_learning/i-notes/src/contexts/TodoState.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport todoContext from './TodoContext'\r\nimport axios, { HttpStatusCode } from 'axios'\r\nimport Swal from 'sweetalert2'\r\nconst TodoState = (props) => {\r\n    const initialTodos = []\r\n    const [todos, setTodos] = useState(initialTodos)\r\n    const getTodos = () => {\r\n        let config = {\r\n            headers: {\r\n                'Authorization': localStorage.getItem('tokenForValidation')\r\n            }\r\n        }\r\n        let url = 'https://inotes-application.onrender.com/user/getTodos'\r\n        axios.get(url, config).then(response => {\r\n            if (response.status === HttpStatusCode.Ok) {\r\n                setTodos(response.data)\r\n            }\r\n        }).catch(error => {\r\n            if (error.response) {\r\n                Swal.fire({ title: \"Error !\", icon: 'error', text: `${error.response.data}` })\r\n            } else {\r\n                Swal.fire(\"Something went wrong\", \"Please try again later\", 'error');\r\n            }\r\n        })\r\n    }\r\n    const updateTodo = (id) => {\r\n        Swal.fire({\r\n            title: 'Enter TODO to update',\r\n            input: 'text',\r\n            inputAttributes: {\r\n                autocapitalize: 'off'\r\n            },\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Update',\r\n            showLoaderOnConfirm: true,\r\n            preConfirm: (description) => {\r\n                const config = {\r\n                    headers: {\r\n                        'Authorization': localStorage.getItem('tokenForValidation')\r\n                    }\r\n                };\r\n                let url = `https://inotes-application.onrender.com/user/updateTodoDescription`\r\n                let data = { 'description': description, 'id': id }\r\n                return axios.put(url, data, config).then(res => {\r\n                    if (res.status === HttpStatusCode.Ok) {\r\n                        Swal.fire({ title: \"Success!\", text: `TODO changed with ${description}`, icon: 'success' })\r\n                        let newTodos = todos.map(todo => {\r\n                            if (todo.id === id) {\r\n                                todo.description = description\r\n                            }\r\n                            return todo;\r\n                        })\r\n                        setTodos(newTodos)\r\n                    }\r\n                }).catch(err => {\r\n                    if (err.response) {\r\n                        Swal.showValidationMessage(`Failed : ${err.response.data}`)\r\n                    } else {\r\n                        Swal.showValidationMessage(\"Something went wrong!\")\r\n                    }\r\n                })\r\n            },\r\n            allowOutsideClick: () => !Swal.isLoading()\r\n        })\r\n    }\r\n    const deleteTodo = (id, setIsLoading) => {\r\n        const config = {\r\n            headers: {\r\n                'Authorization': localStorage.getItem('tokenForValidation')\r\n            }\r\n        };\r\n        let url = `https://inotes-application.onrender.com/user/deleteTodo?id=${id}`\r\n        axios.delete(url, config).then(res => {\r\n            if (res.status === HttpStatusCode.Ok) {\r\n                Swal.fire({ title: \"Success!\", text: `TODO deleted`, icon: 'success' })\r\n                let newTodo = todos.filter((item) => { return item.id !== id })\r\n                setTodos(newTodo)\r\n            }\r\n        }).catch(err => {\r\n            if (err.response) {\r\n                Swal.fire(`Failed`, `${err.response.data}`, `error`)\r\n            } else {\r\n                Swal.fire({ title: \"Error occured Try again!!!\", icon: 'error' })\r\n            }\r\n        }).finally(() => {\r\n            setIsLoading(() => { return false })\r\n        })\r\n    }\r\n    const todoCompleted = (id, setIsLoading) => {\r\n        const config = {\r\n            headers: {\r\n                'Authorization': localStorage.getItem('tokenForValidation')\r\n            }\r\n        };\r\n        let url = `https://inotes-application.onrender.com/user/updateTodoCompletion`\r\n        let data = { 'isCompleted': `true`, 'id': id }\r\n        return axios.put(url, data, config).then(res => {\r\n            if (res.status === HttpStatusCode.Ok) {\r\n                Swal.fire({ title: \"Success!\", text: `TODO completed .`, icon: 'success' })\r\n                let newTodos = todos.map(todo => {\r\n                    if (todo.id === id) {\r\n                        todo.isCompleted = `true`\r\n                    }\r\n                    return todo;\r\n                })\r\n                setTodos(newTodos)\r\n            }\r\n        }).catch(err => {\r\n            if (err.response) {\r\n                Swal.fire(`Failed`, `${err.response.data}`, `error`)\r\n            } else {\r\n                Swal.fire({ title: \"Error occured Try again!!!\", icon: 'error' })\r\n            }\r\n        }).finally(() => {\r\n            setIsLoading(() => { return false })\r\n        })\r\n    }\r\n    return (\r\n        <todoContext.Provider value={{ todos, setTodos, getTodos, updateTodo, deleteTodo, todoCompleted }}>\r\n            {props.children}\r\n        </todoContext.Provider>\r\n    )\r\n}\r\n\r\nexport default TodoState\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}