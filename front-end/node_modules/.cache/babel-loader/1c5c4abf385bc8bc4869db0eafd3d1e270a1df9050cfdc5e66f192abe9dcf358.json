{"ast":null,"code":"import _slicedToArray from\"D:/vs_code/React_applications_learning/i-notes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import categoryContext from'./CategoryContext';import axios,{HttpStatusCode}from'axios';import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";var CategoryState=function CategoryState(props){var initialCategory=[];var _useState=useState(initialCategory),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var getCategories=function getCategories(){var config={headers:{'Authorization':localStorage.getItem('tokenForValidation')}};var url='https://inotes-application.onrender.com/user/getCategories';axios.get(url,config).then(function(response){if(response.status===HttpStatusCode.Ok){setCategory(response.data);}}).catch(function(error){if(error.response){Swal.fire({title:\"Error !\",icon:'error',text:\"\".concat(error.response.data)});}else{Swal.fire(\"Something went wrong\",\"Please try again later\",'error');}});};var deleteCategory=function deleteCategory(id,setIsLoading){var config={headers:{'Authorization':localStorage.getItem('tokenForValidation')}};var url=\"https://inotes-application.onrender.com/user/deleteCategory?id=\".concat(id);axios.delete(url,config).then(function(res){if(res.status===HttpStatusCode.Ok){Swal.fire({title:\"Success!\",text:\"Category deleted with id \".concat(id),icon:'success'});}}).catch(function(err){if(err.response){Swal.fire(\"Failed\",\"\".concat(err.response.data),\"error\");}else{Swal.fire({title:\"Error occured Try again!!!\",icon:'error'});}}).finally(function(){//here we are stoping the loading but we need to remove the card also.\n//its not the correct way that after deleting we should refresh the notes : user/notes not \n//to show the content instead of loading..\n// will not set here..=>setIsLoading(()=>{return false})\n//if we are not setting to false then the state is true ..so when rerendering next card shows\n//loading so set state to false....\nsetIsLoading(function(){return false;});var newCategory=category.filter(function(item){return item.id!==id;});setCategory(newCategory);//getCategories()\n});};var updateCategory=function updateCategory(id){Swal.fire({title:'Enter the Category name to update',input:'text',inputAttributes:{autocapitalize:'off'},showCancelButton:true,confirmButtonText:'Update',showLoaderOnConfirm:true,preConfirm:function preConfirm(name){var config={headers:{'Authorization':localStorage.getItem('tokenForValidation')}};var url=\"https://inotes-application.onrender.com/user/updateCategory\";var data={'name':name,'id':id};return axios.put(url,data,config).then(function(res){if(res.status===HttpStatusCode.Ok){Swal.fire({title:\"Success!\",text:\"Category name changed with \".concat(name,\" for id \").concat(id),icon:'success'});var newCategory=category.map(function(item){if(item.id===id){item.name=name;}return item;});setCategory(newCategory);}}).catch(function(err){if(err.response){Swal.showValidationMessage(\"Failed : \".concat(err.response.data));}else{Swal.showValidationMessage(\"Something went wrong!\");}});},allowOutsideClick:function allowOutsideClick(){return!Swal.isLoading();}});};return/*#__PURE__*/_jsx(categoryContext.Provider,{value:{category:category,setCategory:setCategory,getCategories:getCategories,deleteCategory:deleteCategory,updateCategory:updateCategory},children:props.children});};export default CategoryState;","map":{"version":3,"names":["React","useState","categoryContext","axios","HttpStatusCode","Swal","jsx","_jsx","CategoryState","props","initialCategory","_useState","_useState2","_slicedToArray","category","setCategory","getCategories","config","headers","localStorage","getItem","url","get","then","response","status","Ok","data","catch","error","fire","title","icon","text","concat","deleteCategory","id","setIsLoading","delete","res","err","finally","newCategory","filter","item","updateCategory","input","inputAttributes","autocapitalize","showCancelButton","confirmButtonText","showLoaderOnConfirm","preConfirm","name","put","map","showValidationMessage","allowOutsideClick","isLoading","Provider","value","children"],"sources":["D:/vs_code/React_applications_learning/i-notes/src/contexts/CategoryState.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport categoryContext from './CategoryContext'\r\nimport axios, { HttpStatusCode } from 'axios'\r\nimport Swal from 'sweetalert2'\r\nconst CategoryState = (props) => {\r\n    const initialCategory = []\r\n    const [category, setCategory] = useState(initialCategory)\r\n    const getCategories = () => {\r\n        let config = {\r\n            headers: {\r\n                'Authorization': localStorage.getItem('tokenForValidation')\r\n            }\r\n        }\r\n        let url = 'https://inotes-application.onrender.com/user/getCategories'\r\n        axios.get(url, config).then(response => {\r\n            if (response.status === HttpStatusCode.Ok) {\r\n                setCategory(response.data)\r\n            }\r\n        }).catch(error => {\r\n            if (error.response) {\r\n                Swal.fire({ title: \"Error !\", icon: 'error', text: `${error.response.data}` })\r\n            } else {\r\n                Swal.fire(\"Something went wrong\", \"Please try again later\", 'error');\r\n            }\r\n        })\r\n    }\r\n    const deleteCategory = (id, setIsLoading) => {\r\n        const config = {\r\n            headers: {\r\n                'Authorization': localStorage.getItem('tokenForValidation')\r\n            }\r\n        };\r\n        let url = `https://inotes-application.onrender.com/user/deleteCategory?id=${id}`\r\n        axios.delete(url, config).then(res => {\r\n            if (res.status === HttpStatusCode.Ok) {\r\n                Swal.fire({ title: \"Success!\", text: `Category deleted with id ${id}`, icon: 'success' })\r\n            }\r\n        }).catch(err => {\r\n            if (err.response) {\r\n                Swal.fire(`Failed`, `${err.response.data}`, `error`)\r\n            } else {\r\n                Swal.fire({ title: \"Error occured Try again!!!\", icon: 'error' })\r\n            }\r\n        }).finally(() => {\r\n            //here we are stoping the loading but we need to remove the card also.\r\n            //its not the correct way that after deleting we should refresh the notes : user/notes not \r\n            //to show the content instead of loading..\r\n            // will not set here..=>setIsLoading(()=>{return false})\r\n            //if we are not setting to false then the state is true ..so when rerendering next card shows\r\n            //loading so set state to false....\r\n            setIsLoading(() => { return false })\r\n            let newCategory = category.filter((item) => { return item.id !== id })\r\n            setCategory(newCategory)\r\n            //getCategories()\r\n        })\r\n    }\r\n    const updateCategory = (id) => {\r\n        Swal.fire({\r\n            title: 'Enter the Category name to update',\r\n            input: 'text',\r\n            inputAttributes: {\r\n                autocapitalize: 'off'\r\n            },\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Update',\r\n            showLoaderOnConfirm: true,\r\n            preConfirm: (name) => {\r\n                const config = {\r\n                    headers: {\r\n                        'Authorization': localStorage.getItem('tokenForValidation')\r\n                    }\r\n                };\r\n                let url = `https://inotes-application.onrender.com/user/updateCategory`\r\n                let data = { 'name': name, 'id': id }\r\n                return axios.put(url, data, config).then(res => {\r\n                    if (res.status === HttpStatusCode.Ok) {\r\n                        Swal.fire({ title: \"Success!\", text: `Category name changed with ${name} for id ${id}`, icon: 'success' })\r\n                        let newCategory=category.map(item => {\r\n                            if (item.id === (id)) {\r\n                                item.name = name\r\n                            } return item;\r\n                        })\r\n                        setCategory(newCategory)\r\n                    }\r\n                }).catch(err => {\r\n                    if (err.response) {\r\n                        Swal.showValidationMessage(`Failed : ${err.response.data}`)\r\n                    } else {\r\n                        Swal.showValidationMessage(\"Something went wrong!\")\r\n                    }\r\n                })\r\n            },\r\n            allowOutsideClick: () => !Swal.isLoading()\r\n        })\r\n    }\r\n    return (\r\n        <categoryContext.Provider value={{ category, setCategory, getCategories, deleteCategory, updateCategory }}>\r\n            {props.children}\r\n        </categoryContext.Provider>\r\n    )\r\n}\r\n\r\nexport default CategoryState\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}